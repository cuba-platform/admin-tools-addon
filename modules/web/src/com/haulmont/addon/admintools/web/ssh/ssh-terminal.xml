<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<window xmlns="http://schemas.haulmont.com/cuba/window.xsd"
        caption="msg://caption"
        class="com.haulmont.addon.admintools.web.ssh.SshTerminal"
        messagesPack="com.haulmont.addon.admintools.web.ssh"
        xmlns:at="http://schemas.haulmont.com/cubaat/0.1/ui-component.xsd">
    <dsContext>
        <datasource id="sshCredentialDs"
                    allowCommit="false"
                    view="withPrivateKey"
                    class="com.haulmont.addon.admintools.global.ssh.SshCredential"/>
        <collectionDatasource id="sshCredentialListDs"
                              view="withPrivateKey"
                              class="com.haulmont.addon.admintools.global.ssh.SshCredential">
            <query>
                <![CDATA[select s from cubaat$SshCredential s]]>
            </query>
        </collectionDatasource>
    </dsContext>
    <timers>
        <timer id="updateConsole"
               autostart="true"
               delay="300"
               onTimer="onUpdateConsole"
               repeating="true"/>
    </timers>
    <actions>
        <action id="loadCredential" caption="msg://loadCredential" invoke="loadCredential"/>
        <action id="saveCredential" caption="msg://saveCredential" invoke="saveCredential"/>
        <action id="removeCredential" caption="msg://removeCredential" invoke="removeCredential"/>
    </actions>
    <dialogMode height="600"
                width="800"/>
    <layout expand="terminalBox"
            spacing="true">
        <groupBox id="fieldsBox"
                  caption="msg://fieldBox.caption"
                  collapsable="true"
                  collapsed="true"
                  spacing="true">
            <split orientation="horizontal" width="100%" maxSplitPosition="350px">
                <fieldGroup id="fieldGroup"
                            datasource="sshCredentialDs">
                    <column width="250px">
                        <field caption="msg://host.caption"
                               generator="generateHostnameField"
                               property="hostname"/>
                        <field property="login"/>
                        <field generator="generatePasswordField"
                               property="password"/>
                        <field property="privateKey"/>
                        <field property="passphrase"/>
                    </column>
                </fieldGroup>
                <vbox id="credentials" margin="true" spacing="true" width="550px">
                    <hbox id="hboxSessions" spacing="true">
                        <label id="savedSessionLabel" value="msg://savedSessions"/>
                        <optionsList id="optionsList"
                                     optionsDatasource="sshCredentialListDs"
                                     nullOptionVisible="false"
                                     width="300px"
                                     height="160px"/>
                        <vbox id="sessionsButtons" spacing="true">
                            <button id="loadCredentialBtn" action="loadCredential"/>
                            <button id="saveCredentialBtn" action="saveCredential"/>
                            <button id="removeCredentialBtn" action="removeCredential"/>
                        </vbox>
                    </hbox>

                </vbox>
            </split>
        </groupBox>
        <vbox id="terminalBox"
              expand="terminal"
              spacing="true">
            <hbox expand="terminalProgressBar"
                  spacing="true"
                  width="100%">
                <buttonsPanel id="terminalBtn">
                    <button id="connectBtn"
                            caption="msg://connect"
                            invoke="connect"/>
                    <button id="disconnectBtn"
                            caption="msg://disconnect"
                            invoke="disconnect"/>
                    <button id="fitBtn"
                            caption="msg://fit"
                            invoke="onFitBtnClick"/>
                </buttonsPanel>
                <progressBar id="terminalProgressBar"
                             align="MIDDLE_CENTER"/>
            </hbox>
            <at:xterm-js id="terminal"
                         width="100%"/>
        </vbox>
    </layout>
</window>
